---
phase: 03.9-redo-activitycreateedit-ui-migration-with-full-fidelity
plan: 02
subsystem: ui
tags: [blazor, razor, localization, cascade-disabled, mudblazor]

# Dependency graph
requires:
  - phase: 03.9-01
    provides: _cascadeLoading field toggled in OnClientChangedAsync; corrected code-behind logic as foundation for markup changes

provides:
  - Corrected ActivityCreateEdit.razor with wrong localization key fixed (LockCandidateEvaluation -> HideCandidateEvalutionAndNotesWhenUserHasNotEvaluated)
  - Standalone LeadershipPosition and BlindRecruitment MudSelect blocks removed from master data card
  - Cascade disabled states on all client-dependent template inputs (11 inputs total)
  - InterviewEmailTwoPlusRoundsForSelected as the correct 2+ rounds email label key

affects:
  - Any future plan extending the ActivityCreateEdit form template section

# Tech tracking
tech-stack:
  added: []
  patterns:
    - "Cascade disabled pattern: Disabled='@(_cascadeLoading || !_form.ClientId.HasValue)' applied to all inputs that depend on client selection"

key-files:
  created: []
  modified:
    - src/SignaturPortal.Web/Components/Pages/Recruiting/ActivityCreateEdit.razor

key-decisions:
  - "LeadershipPosition and BlindRecruitment are not shown as standalone UI dropdowns — only RecruitmentTypeId (backed by ERRecruitmentType lookup) is shown; the translation to/from binary flags happens in code-behind"
  - "Client autocomplete itself does NOT get cascade disabled state — it is the trigger, not a dependent"

patterns-established:
  - "Client-dependent inputs pattern: Disabled='@(_cascadeLoading || !_form.ClientId.HasValue)' guards both the async reload window and the no-client-selected state"

requirements-completed: [CRUD-01, CRUD-04]

# Metrics
duration: 3min
completed: 2026-02-23
---

# Phase 03.9 Plan 02: ActivityCreateEdit Razor Markup Defect Fixes Summary

**Fixed 4 razor markup defects: correct HideCandidateEvalutionAndNotesWhenUserHasNotEvaluated localization key, removed duplicate LeadershipPosition/BlindRecruitment dropdowns, added cascade Disabled states to 11 client-dependent template inputs, and corrected Interview 2+ rounds email label key.**

## Performance

- **Duration:** 3 min
- **Started:** 2026-02-23T16:52:36Z
- **Completed:** 2026-02-23T16:55:38Z
- **Tasks:** 1
- **Files modified:** 1

## Accomplishments

- LockCandidateEvaluation checkbox now uses the correct legacy localization key `HideCandidateEvalutionAndNotesWhenUserHasNotEvaluated` (with the legacy typo "Evalution" preserved to match the DB key exactly)
- LeadershipPosition and BlindRecruitment MudSelect blocks removed from the master data card — only the single RecruitmentTypeId dropdown remains, matching the correct legacy UI
- All client-dependent inputs in the Templates card now carry `Disabled="@(_cascadeLoading || !_form.ClientId.HasValue)"` — prevents interaction during async cascade reload and when no client is selected
- InterviewEmailForSelected2PlusRounds label key corrected to `InterviewEmailTwoPlusRoundsForSelected` matching the actual legacy DB key

## Task Commits

Each task was committed atomically:

1. **Task 1: Fix razor markup — localization key, cascade disabled states, RecruitmentType fields** - `c7e7dba` (fix)

## Files Created/Modified

- `src/SignaturPortal.Web/Components/Pages/Recruiting/ActivityCreateEdit.razor` - 4 markup defects fixed: localization key, removed 2 dropdown blocks, cascade Disabled on 11 inputs, corrected email label key

## Decisions Made

- The LeadershipPosition and BlindRecruitment UI dropdowns are removed, not hidden conditionally — the research spec confirmed the correct legacy UI shows only the RecruitmentTypeId dropdown. The bidirectional translation to binary DB flags is handled entirely in code-behind (established in Plan 01)
- Client autocomplete itself was deliberately excluded from the cascade disabled state — it is the trigger that initiates the cascade reload, not a dependent field

## Deviations from Plan

None - plan executed exactly as written.

## Issues Encountered

- Web project build shows MSB3027/MSB3021 file-lock errors because Visual Studio (devenv.exe) and the running dev server (SignaturPortal.Web.exe) have DLL files locked. Zero C# compiler errors confirmed via `grep "error CS"` returning no results. This is the same environment constraint documented in Plan 01 summary — build will succeed when the dev server is not running.

## User Setup Required

None - no external service configuration required.

## Next Phase Readiness

- Both Plan 01 (code-behind) and Plan 02 (markup) defect fixes are complete for ActivityCreateEdit
- The form now has correct localization keys, correct field set, and correct disabled state behavior
- Phase 03.9 is complete — all identified defects from the research audit are resolved

---
*Phase: 03.9-redo-activitycreateedit-ui-migration-with-full-fidelity*
*Completed: 2026-02-23*
