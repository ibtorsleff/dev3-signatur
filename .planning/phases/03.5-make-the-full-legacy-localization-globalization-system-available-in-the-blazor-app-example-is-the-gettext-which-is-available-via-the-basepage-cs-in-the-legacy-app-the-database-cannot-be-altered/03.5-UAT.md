---
status: diagnosed
phase: 03.5-localization
source: 03.5-01-SUMMARY.md, 03.5-02-SUMMARY.md, 03.5-03-SUMMARY.md, 03.5-04-SUMMARY.md
started: 2026-02-17T00:04:45Z
updated: 2026-02-17T00:18:51Z
---

## Current Test

[testing complete]

## Tests

### 1. ActivityList Shows Localization Keys
expected: Navigate to the activity list page (any mode: Draft, Ongoing, or Closed). The page headline and column headers should display either localized text (if database entries exist) or PascalCase English keys in bracket notation (e.g., [DraftActivities], [ColumnHeadline], [ColumnCreatedDate]). At minimum, bracket notation keys should be visible instead of hardcoded Danish text.
result: pass

### 2. Filter Toggle Tooltips Localized
expected: Hover over the filter toggle icon in the activity list. The tooltip should show either translated text or bracket notation keys (e.g., [ShowFilters] or [HideFilters]) instead of hardcoded Danish text.
result: pass

### 3. Navigation Labels Localized
expected: Look at the top navigation menu (Row 1, Row 2, Row 3). Navigation item labels should display either localized text or bracket notation keys (e.g., [NavigationActivityList], [NavigationSearch], [NavigationStatistics]) instead of hardcoded text.
result: issue
reported: "no brackets"
severity: major

### 4. Portal Name Localized
expected: The portal name displayed in the navigation should show either localized text or a bracket notation key (e.g., [PortalNameRecruiting]) instead of hardcoded text.
result: issue
reported: "no brakets"
severity: major

### 5. Admin Cache Status Page Loads
expected: Navigate to /admin/cache-status. The page should load successfully and display: (1) a count of cached localization entries, (2) a timestamp showing when the cache was last loaded, and (3) a "Reload Cache" button.
result: pass

### 6. Cache Reload Functionality
expected: On the /admin/cache-status page, click the "Reload Cache" button. A loading spinner should appear briefly. After reload completes, the entry count and "Last Loaded" timestamp should update to reflect the current time, and a success message should be displayed.
result: pass

## Summary

total: 6
passed: 4
issues: 2
pending: 0
skipped: 0

## Gaps

- truth: "Navigation item labels should display either localized text or bracket notation keys (e.g., [NavigationActivityList], [NavigationSearch], [NavigationStatistics]) instead of hardcoded text"
  status: failed
  reason: "User reported: no brackets"
  severity: major
  test: 3
  root_cause: "ResolveLabel method in NavMenu.razor.cs has inverted logic. When GetText returns bracket notation, the condition `if (!text.StartsWith('['))` evaluates to FALSE, causing fallback to item.Label (hardcoded text) instead of returning the bracket notation."
  artifacts:
    - path: "src/SignaturPortal.Web/Components/Layout/NavMenu.razor.cs"
      issue: "Lines 43-53: ResolveLabel has inverted fallback logic that suppresses bracket notation"
  missing:
    - "Fix ResolveLabel to return bracket notation when GetText returns [key] format"
  debug_session: ".planning/debug/navigation-labels-no-brackets.md"

- truth: "Portal name should display either localized text or a bracket notation key (e.g., [PortalNameRecruiting]) instead of hardcoded text"
  status: failed
  reason: "User reported: no brakets"
  severity: major
  test: 4
  root_cause: "ResolvePortalName method in NavMenu.razor.cs has inverted logic. When GetText returns bracket notation, the condition `if (!text.StartsWith('['))` evaluates to FALSE, causing fallback to _config.PortalName (hardcoded text) instead of returning the bracket notation."
  artifacts:
    - path: "src/SignaturPortal.Web/Components/Layout/NavMenu.razor.cs"
      issue: "Lines 55-64: ResolvePortalName has inverted fallback logic that suppresses bracket notation"
  missing:
    - "Fix ResolvePortalName to return bracket notation when GetText returns [key] format"
  debug_session: ".planning/debug/portal-name-bracket-notation.md"
