---
phase: 03.5-localization
plan: 02
type: execute
wave: 2
depends_on: ["03.5-01"]
files_modified:
  - src/SignaturPortal.Web/Components/Pages/Activities/ActivityList.razor
  - src/SignaturPortal.Web/Components/Pages/Activities/ActivityList.razor.cs
autonomous: true

must_haves:
  truths:
    - "Activity list headline text comes from GetText, not hardcoded Danish strings"
    - "Filter toggle tooltip comes from GetText"
    - "Column titles come from GetText"
    - "All visible text on the activity list page is localized via ILocalizationService"
  artifacts:
    - path: "src/SignaturPortal.Web/Components/Pages/Activities/ActivityList.razor.cs"
      provides: "Localized headline text via ILocalizationService.GetText"
      contains: "ILocalizationService"
    - path: "src/SignaturPortal.Web/Components/Pages/Activities/ActivityList.razor"
      provides: "Localized column titles and UI text via L.GetText"
      contains: "L.GetText"
  key_links:
    - from: "src/SignaturPortal.Web/Components/Pages/Activities/ActivityList.razor.cs"
      to: "ILocalizationService"
      via: "@inject"
      pattern: "ILocalizationService"
    - from: "src/SignaturPortal.Web/Components/Pages/Activities/ActivityList.razor"
      to: "ILocalizationService"
      via: "L.GetText calls"
      pattern: "L\\.GetText"
---

<objective>
Replace all hardcoded Danish strings in ActivityList.razor and ActivityList.razor.cs with ILocalizationService.GetText calls. This covers the headline text ("Kladdesager", "Igangvaerende sager", "Afsluttede sager"), filter toggle tooltip ("Skjul filtre"/"Vis filtre"), column titles, and the "No records" message.

Purpose: The activity list page displays correctly localized text based on the user's language, using the same localization keys as the legacy WebForms ActivityList.
Output: ActivityList page with zero hardcoded Danish strings.
</objective>

<execution_context>
@C:/Users/it/.claude/get-shit-done/workflows/execute-plan.md
@C:/Users/it/.claude/get-shit-done/templates/summary.md
</execution_context>

<context>
@.planning/PROJECT.md
@.planning/STATE.md
@.planning/phases/03.5-make-the-full-legacy-localization-globalization-system-available-in-the-blazor-app-example-is-the-gettext-which-is-available-via-the-basepage-cs-in-the-legacy-app-the-database-cannot-be-altered/03.5-RESEARCH.md
@.planning/phases/03.5-make-the-full-legacy-localization-globalization-system-available-in-the-blazor-app-example-is-the-gettext-which-is-available-via-the-basepage-cs-in-the-legacy-app-the-database-cannot-be-altered/03.5-01-SUMMARY.md
@src/SignaturPortal.Web/Components/Pages/Activities/ActivityList.razor
@src/SignaturPortal.Web/Components/Pages/Activities/ActivityList.razor.cs
</context>

<tasks>

<task type="auto">
  <name>Task 1: Localize ActivityList headline, tooltips, column titles, and static text</name>
  <files>
    src/SignaturPortal.Web/Components/Pages/Activities/ActivityList.razor
    src/SignaturPortal.Web/Components/Pages/Activities/ActivityList.razor.cs
  </files>
  <action>
    **IMPORTANT:** Before replacing strings, research the actual localization keys used in the legacy ActivityList. Check the legacy code at `C:\Dev\Dev3Org\AtlantaSignatur\Web\MainSite\Responsive\Recruiting\ActivityList.ascx` and its code-behind for GetText calls. Use the exact same keys so the existing Localization table entries are reused. If the keys cannot be found in legacy, query the Localization table directly for likely keys (e.g., search for Value matching "Kladdesager", "Igangvaerende sager", etc.).

    1. **ActivityList.razor.cs** -- Add `[Inject] private ILocalizationService L { get; set; } = default!;` and add `using SignaturPortal.Application.Interfaces;` if not already present.

    2. **ActivityList.razor.cs** -- Replace hardcoded headline text in `OnParametersSet`:
       ```csharp
       // Before:
       _headlineText = newStatus switch
       {
           ERActivityStatus.Draft => "Kladdesager",
           ERActivityStatus.Closed => "Afsluttede sager",
           _ => "Igangvaerende sager"
       };
       // After: use GetText with actual legacy keys (research first!)
       _headlineText = newStatus switch
       {
           ERActivityStatus.Draft => L.GetText("{legacy_key_for_draft}"),
           ERActivityStatus.Closed => L.GetText("{legacy_key_for_closed}"),
           _ => L.GetText("{legacy_key_for_ongoing}")
       };
       ```
       Also update the field initializer `private string _headlineText = "..."` to not include a hardcoded default -- set it in OnParametersSet which always runs.

    3. **ActivityList.razor** -- Replace hardcoded UI text:
       - Filter toggle tooltip: `"Skjul filtre"` -> `L.GetText("{key}")` and `"Vis filtre"` -> `L.GetText("{key}")`
       - Column Title attributes: Replace each `Title="..."` with the appropriate GetText call, e.g., `Title="@L.GetText("{key}")"`. Research legacy column header keys.
       - "Continuous Posting" tooltip: Replace with GetText
       - "Copy activity" title: Replace with GetText
       - "No recruitment activities found." in NoRecordsContent: Replace with GetText
       - "Error loading activities..." snackbar message in code-behind: Replace with GetText

    4. **Key research strategy:** Look in the legacy ActivityList.ascx and .ascx.cs files for patterns like `GetText("...")`. The legacy file likely uses keys like `"DraftCases"`, `"OnGoingCases"`, `"ClosedCases"`, or Danish equivalents. If exact keys cannot be determined from legacy source, query the database: `SELECT [Key], Value FROM Localization WHERE LanguageId = 3 AND Value LIKE '%Kladde%' AND Enabled = 1`.
  </action>
  <verify>
    1. Run `dotnet build src/SignaturPortal.Web` -- must compile.
    2. Grep the files for any remaining hardcoded Danish strings: `grep -rn "Kladde\|Igangv\|Afslut\|Skjul filtre\|Vis filtre" src/SignaturPortal.Web/Components/Pages/Activities/`
    3. The grep should return zero matches (all replaced with GetText).
  </verify>
  <done>
    ActivityList.razor and .razor.cs contain zero hardcoded Danish strings. All visible text uses ILocalizationService.GetText with correct legacy localization keys.
  </done>
</task>

</tasks>

<verification>
1. `dotnet build src/SignaturPortal.Web` compiles
2. No hardcoded Danish strings remain in ActivityList files
3. Activity list renders correctly with localized text when running the app
</verification>

<success_criteria>
- Every user-visible string on the activity list page comes from ILocalizationService.GetText
- Localization keys match the legacy WebForms ActivityList keys (same keys = same translations)
- Page still renders correctly for Danish users (same text as before, just from DB instead of hardcoded)
</success_criteria>

<output>
After completion, create `.planning/phases/03.5-make-the-full-legacy-localization-globalization-system-available-in-the-blazor-app-example-is-the-gettext-which-is-available-via-the-basepage-cs-in-the-legacy-app-the-database-cannot-be-altered/03.5-02-SUMMARY.md`
</output>
